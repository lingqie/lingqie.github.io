4.a
1，現在SAFP TMS 2.0中最大值為11517；
2，view和java代碼中數據類型都是int

4.b
1，和Diana討論後，了解平台獲取safp中的數據，是通過left join trainingtest.dbo.classAddress as classAddress
所以獲取Agent也應該是通過類似left join CFJJtrainingtest.dbo.classAddress as classAddress
這樣來獲取。
然後兩個seclect UNION 生成view，在生成view僅僅只是獲取ClassAddress的name，venue也一樣，並不會存儲其id，所以不會產生id衝突的問題，所以應該不需要再重命名，因為從數據庫上來看就是兩個層面。

是cfjj TMS將classAddress.chinName,classAddress.portName,venue.chinese,venue.portuguese傳送給agent，即agent上的proposalClass就不使用leftjoin，直接添加四個欄位ProposalClass.venuePortuguese，到時候平台讀取agent數據庫時，修改獲取的邏輯，直接獲取相關名字。

5，studentAdmissionView欄位分析

view 獲取proposalClass.workflowStatus IN (1, 2)即需要狀態為PUBLISHED, INTERNAL

返回欄位如下

|欄位  |報表中title | 分析|
|---- |----------- |----|
|year |年度 |獲取proposalClass.startDate的年份|
|yearCategory|年度計劃分類 | 獲取yearCategory的chinName|
|courseName|課程|  獲取course.id＋course.chinName（如chinName為null或空字符串則使用portName）|
|courseCategory|課程範疇|獲取Course_Category中Category的chinName（空則shi使用portName）|
|className|班|獲取proposalClass.classSeqNum和chinName組合而成|
|className_CH|班（中）|proposalClass.chinName|
|className_PT|班（葡）|proposalClass.portName|
|pc.hours|課時|proposalClass.hours|
|language|授課語言|TeachingLanguage.chinese|
|manager|負責人|根據proposalClass.manager_id獲取Operator.nickname|
|helper|輔導人|根據proposalClass.helper_id獲取Operator.nickname|
|startDate|開班日期|轉換proposalClass.startDate為只有日期的格式|
|endDate|結束日期|proposalClass.endDate只有日期的格式|
|locations|授課地區|根據ProposalClass_Venue獲取對應的Venue.chinese|
|cooperators|合辦機構|根據ProposalClass中的cooperator，cooperator2，cooperator3，cooperator4獲取對應的Cooperator.chinese組合而成|
|studentID|id學員|ProposalClassAdmission.student_id|
|studentName|學員|獲取student.chinName(如空使用portName)|
|studentName_CH|學員（中）|student.chinName|
|studentName_PT|學員（葡）|student.portName|
|idNumber|身分證號碼|格式化顯示student.idNumber|
|sex|性別|如果student.sex為'F'則返回'女'，'M'則返回'男'，空則null|
|educationLevel|最高學歷|根據student.eduLevel_id獲取EduLevel.chinName|
|nativeLang|母語|根據student.nativeLanguage_id獲取NativeLanguage.chinese|
|studentType|職業性質|根據ProposalClassAdmission.studentType，如果為0，返回'公職人員',否則返回'非公職人員'|
|admissionType|報名性質|根據ProposalClassAdmission.admissionType_code獲取AdmissionTypeView.chinDesc|
|admissionAge|報讀時-年齡|計算學員報考時年齡|
|admissionEntity|報讀時-部門|如果studentType為0獲取GovAgencyView.abbr+chinName否則返回ProposalClassAdmission.subsidiaryOrgan|
|admissionGovDept|報讀時-附屬單位|GovDepartmentView.chinName|
|admissionAppointmentType|報讀時-任用方式|AppointmentView.chinDesc|
|admissionGovGrade|報讀時-職程級別|GovGrade.chinName|
|admissionGovPost|報讀時-職稱|GovPostView.chinDesc|
|admissionGovRank|報讀時-職等|GovRankView.chinName|
|admissionJobScope|報讀時-職務範疇|JobScope.chinDesc|
|currentAge|現年齡|計算學員現在年齡|
|currentEntity|現部門|獲取student現部門|
|currentGovDept|現附屬單位|獲取student現附屬單位|
|currentAppointmentType|現任用方式|獲取student現任用方式|
|currentGovGrade|現職程級別|獲取student現職程級別|
|currentGovPost|現職稱|獲取student現職稱|
|currentGovRank|現職等|獲取student現職等|
|currentJobScope|現職務範疇|獲取student現職務範疇|
|isPass|合格的|ProposalClassScore.qualification=0則返回1，否則返回0|
|hasCert|獲證書的|ProposalClassScore.complete = 1則返回1，否則返回0|
|isAdmitted|錄取的|ProposalClassAdmission.admissionStatus=0則返回1，否則返回0|
|studentStatus|修讀狀態|1. proposalClass.workflowStatus=3返回'已取消'。<br>2. ProposalClassScore.qualification =0且 ProposalClassScore.complete = 1 則返回'合格、獲証書'。<br>3. pcs.qualification = 0 且（pcs.complete 為null或者等於0），則返回 '合格'。<br>4.pcs.qualification = 1 則返回'不合格'。<br>5.pcs.qualification = 2 則返回'待補讀'。<br>6.pcs.complete= 1 則返回 '獲証書'。<br>7.如果現在日期大於課程endDate 且ProposalClassAdmission.admissionStatus = 0 則返回'成績待定'。<br>8.如果現在日期小於課程endDate 且ProposalClassAdmission.admissionStatus = 0 則返回'修讀中'。<br>9.現在日期小於課程startDate 且 且ProposalClassAdmission.admissionStatus = 0 則返回'已綠取'。<br>10.admissionStatus＝2或者(現在日期大於等於 課程.startDate 且 admissionStatus = 1)則返回'不獲綠取'。<br>11.現在日期小於課程startDate 且 且ProposalClassAdmission.admissionStatus = 1 則返回 '甄選中'。<br>12.以上都不符合則返回null|
|courseID|Id課程|course.id|
|classSeqNum|課程編號|proposalClass.classSeqNum|


通過讀取ApplicationFormDataView組裝TMS裡面的ProposalClassAdmission表

|欄位  | 详细使用情况 |
|---- |----|
|id|1.EditRegistrations2會利用DefaultAdmissionService中的getRegistrationView()方法來組裝一個view，這個view的init中addAppFormRegistrations（）時，會將AppFormDataView.id不存在於admission中的拿出來組裝RegistrationView<br>2.在點擊報名頁面中，點擊學員資料時，用來找回admission對應的的appFormDataView，用於比admission中性別等欄位與Student中的差異。|
|proposalClassId|EditRegistrations2頁面，點擊全部報名時，用ProposalClass proposalClass = dao.find(ProposalClass.class, admissible.getId());來篩選該班級的appFormDataView。並將其置入到proposalClassAdmission中|
|staffCode|1.EditRegistrations2頁面中，點擊全部報名存入admission中，用於與Student類中staffcode比對，如果一致，就在student中的proposalClassAdmissions加入admission且admission中的student設置為對應的Student。<br>2.在點擊學員資料，會根據staffCode取得admissionService.getGovInfoView(selectedAdmission.getStaffCode());用於對比報名資料與公務人員資料庫的差別。<br>3.在點擊“學員資料”時，標題會有是否連接到公務人員資料庫的字樣，可見性由admission中staffCode不為空決定。<br>4.在甄选页面（EditClassAdmission4）中，点击“完成甄選”，會觸發notifyService.notify方法，在admission.staffCode不為空且！admission.isNotified()，則傳入admisssion和staffCode，用於調用activityStreamService和Calender這兩個WebService方法，更新平台的通知和行事曆。<br>5.在連接現有學員，及開新學員時，都會把admission中的staffCode複製給Student學員。|
|chinName|1.在點擊“學員資料”時，修改點擊存儲之後，會把admission中的name(mobile,companyTel,email,fax)覆蓋掉student.name(mobile,companyTel,email,fax).<br>2.在開新學員時，會將name(mobile,companyTel,email,fax)傳遞給新開的student。<br>3.SMS学员页面，回显示admissions.name(mobile,companyTel,email,fax)，以供查看勾選發送SMS，會以葡文名字排序|
|portName|同上|
|mobile|同上|
|companyTel|同上|
|email|同上|
|fax|同上|
|idCardNo|1.在點擊“學員資料”時，修改點擊存儲之後，會把admission中的idNumber覆蓋掉student.idNumber.<br>2.在開新學員時，會將idNumber傳遞給新開的student。|
|entityId|1.獲取對應的govAgency，放入admission.govAgency,用於報名界面分類對應局（如果沒有局，會根據StudentType分類到無部門或者其他非公職部門分類）的admissionview和RegistrationView，及報名界面中，獲取局其下對應的部門<br>2.在點擊“學員資料”時，修改點擊存儲之後，會把admission中的govAgency覆蓋掉student.govAgency.<br>3.在開新學員時，會將govAgency傳遞給新開的student。|
|subunitEntityId|1.獲取對應的govDepartment，放入admission.govDepartment<br>2.在點擊“學員資料”時，修改點擊存儲之後，會把admission中的govDepartment覆蓋掉student.govDepartment.<br>3.在開新學員時，會將govDepartment傳遞給新開的student。<br>4.報名頁面中點擊學員資料會在職務狀況部分顯示出來。|
|vinculumTypeId|1.獲取對應的appointment，放入admission.appointment,<br>同上2，3，4|
|careerId|1.獲取對應的govPost，放入admission.govPost，<br>同上2，3，4<br>5.點擊學員資料時，會根據職位類型的選擇來選擇是否顯示，如果選擇一般職程，則顯示|
|categoryId|1.獲取對應的govRank，放入admission.govRank，<br>同上2，3，4<br>5.點擊學員資料時，會根據職位類型的選擇來選擇是否顯示，如果選擇一般職程，則顯示|
|categoryScaleId|1.獲取對應的govRankLevel，放入admission.govRankLevel，<br>同上2，3，4<br>5.點擊學員資料時，會根據職位類型的選擇來選擇是否顯示，如果選擇一般職程，則顯示|
|officialTypeId|1.獲取對應的officialType，放入admission.officialType，<br>同上2，3，4<br>5.點擊學員資料時，會根據職位類型的選擇來選擇是否顯示，如果選擇官職，則顯示|
|enterGovDate|1.放入admission.hireDate<br>同上2，3，4|
|enterCareerDate|1.放入admission.currentPostEntryDate<br>同上2，3，4|
|jobDescription|1.admission.jobDescription,<br>2.報名頁面中點擊學員資料會在職務狀況部分顯示出來。|
|educationLevelTypeId|1.放入admission.eduLevel<br>2.在點擊“學員資料”時，修改點擊存儲之後，會把admission中的eduLevel覆蓋掉student.eduLevel.<br>3.在開新學員時，會將eduLevel傳遞給新開的student。<br>4.報名頁面中點擊學員資料會在學歷部分顯示出來。|
|educationMajor|1.放入admission.major<br>同上2，3，4|
|teachingLanguageId|1.admission.setTeachingLanguage<br>同上2，3，4|
|nativeLanguageId|1.放入admission.nativeLanguage<br>2.在點擊“學員資料”時，修改點擊存儲之後，會把admission中的nativeLanguage覆蓋掉student.nativeLanguage.<br>3.在開新學員時，會將nativeLanguage傳遞給新開的student。<br>4.報名頁面中點擊學員資料會在語言知識部分顯示出來。|
|otherNativeLanguageStr|1.放入admission.otherNativeLanguage<br>同上2，3，4|
|cantWriteLevelId|1.放入admission.cantWriteLevel<br>同上2，3，4|
|cantSpeakLevelId|1.放入admission.cantSpeakLevel<br>同上2，3，4|
|cantOfficialRecognizedLevelId|1.放入admission.cantOfficialRecognizedLevel<br>同上2，3，4|
|mandWriteLevelId|1.放入admission.mandWriteLevel<br>同上2，3，4|
|mandSpeakLevelId|1.放入admission.mandSpeakLevel<br>同上2，3，4|
|mandOfficialRecognizedLevelId|1.放入admission.mandOfficialRecognizedLevelId<br>同上2，3，4|
|portWriteLevelId|1.放入admission.portWriteLevel<br>同上2，3，4|
|portSpeakLevelId|1.放入admission.portSpeakLevel<br>同上2，3，4|
|portOfficialRecognizedLevelId|1.放入admission.portOfficialRecognizedLevelId<br>同上2，3，4|
|engWriteLevelId|1.放入admission.engWriteLevel<br>同上2，3，4|
|engSpeakLevelId|1.放入admission.engSpeakLevel<br>同上2，3，4|
|engOfficialRecognizedLevelId|1.放入admission.engOfficialRecognizedLevelId<br>同上2，3，4|
|coordinatorStatus和approverStatus|1.用於判斷顯示TMS報名界面中全部報名按鈕上面的hr線內的data－content內容是什麼<br>1.coordinatorStatus＝"S"且approverStatus為空或者空字符串,則提示"待報名 (待審批名單)<br>2.coordinatorStatus＝"S"且approverStatus＝"A",則提示"待報名 (已批准，待傳回中心)"<br>3.coordinatorStatus＝"S"且approverStatus＝"R",則提示"待報名"<br>4.coordinatorStatus＝"P"且approverStatus＝"A",則提示"待報名 (局長已簽名, 已提交到SAFP)"|
|formCode|沒用到|
|applicationListFormCode|點擊“全部報名”時，會new ApplicationForm(),將List<AppFormDataView>的第一個的applicationListFormCode放入ApplicationForm.applicationListFormCode,存到DB裡。|
|coordinatorOrder|1.admission.setRecommendationOrder,報名頁面中，學員第4列顯示的次序，可以彈出設置面板，設置次序，就是RecommendationOrder。<br>2.甄选界面中，会根据admissionType（报名形式）和RecommendationOrder（次序）排序|
|appraiserReasonCode|1.admission.setAdmissionType，,報名頁面中，學員第3列顯示的报名形式，可以彈出設置面板，設置报名形式，就是AdmissionType。<br>2.甄选界面中，会根据admissionType（报名形式）和RecommendationOrder（次序）排序|
|appraiserOtherReasonStr|沒用到|
|sex|獲取“M”，“F”，轉換為枚舉Sex.M,Sex.F，<br>2.在點擊“學員資料”時，修改點擊存儲之後，會把admission中的sex覆蓋掉student.sex.<br>3.在開新學員時，會將sex傳遞給新開的student。<br>4.報名頁面中點擊學員資料會在身份及联络部分顯示出來。|






|欄位  | TMS中使用的表|对应的view|CFJJ中是否有該表|
|---- |----|----|----|
|proposalClassId|proposalClass|無|有|
|entityId|GovAgency|GovAgencyView|有，SAFP中GovAgency沒有List<GovDepartment>，所以是通過Service查詢sql來獲取的對應departmentID，再去讀取departmentView來獲取，CFJJ則有List<GovDepartment>，須注意修改|
|subunitEntityId|GovDepartment|GovDepartmentView|有|
|vinculumTypeId|Appointment|AppointmentView|有|
|careerId|GovPost|GovPostView|有|
|categoryId|govRank|GovRankView|有|
|categoryScaleId|GovRankLevel|GovRankLevelView|無，CFJJ中是用int來表示|
|officialTypeId|OfficialType|officialTypeView|沒有|
|educationLevelTypeId|EduLevel|無，不是讀取view|有，CFJJ這邊還多了個code屬性|
|teachingLanguageId|Language|LanguageTypeView|沒有，CFJJ使用的teachingLanguage表|
|nativeLanguageId|Language|LanguageTypeView|沒有，CFJJ使用的nativeLanguage表|
|cantWriteLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
|cantSpeakLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
|cantOfficialRecognizedLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
|mandWriteLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
|mandSpeakLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
|mandOfficialRecognizedLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
|portWriteLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
|portSpeakLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
|portOfficialRecognizedLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
|engWriteLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
|engSpeakLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
|engOfficialRecognizedLevelId|LanguageLevel|LanguageLevelTypeView|有，但是屬性不一樣|
